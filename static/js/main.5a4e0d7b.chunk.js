(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),i=(a(81),a(82),a(41)),l=a(21),u=a(145),s=a(149),m=a(153),d=a(150),p=a(147),f=a(148),g=a(39),h=a(40),v=a.n(h),b=Object(u.a)(function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper}}});function w(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],o=t[1],c=b(),i=Object(n.useState)([]),u=Object(l.a)(i,2),s=u[0],m=u[1];function d(){window.innerHeight+document.documentElement.scrollTop!==document.documentElement.offsetHeight||a||o(!0)}function h(){v.a.get("https://api.themoviedb.org/3/movie/popular?api_key=3d9f6ef05faa3072ee2caf7fb6870964&language=en-US&page=1").then(function(e){m(e.data.results),o(!1)}).catch(function(e){console.log(e)})}return Object(n.useEffect)(function(){o(!0),h()},[]),Object(n.useEffect)(function(){return window.addEventListener("scroll",d),function(){return window.removeEventListener("scroll",d)}},[]),Object(n.useEffect)(function(){a&&h()},[a]),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:c.root},r.a.createElement(p.a,{cellHeight:300,cols:5,className:c.gridList},s.map(function(e){return r.a.createElement(g.b,{to:"/movies/".concat(e.id)},r.a.createElement(f.a,{key:e.id},r.a.createElement("img",{src:"http://image.tmdb.org/t/p/w185/".concat(e.poster_path),alt:e.title})))})),a&&"Fetching more list items..."))}var E=r.a.createContext({}),j=E.Provider,O=(E.Consumer,Object(u.a)(function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));function y(){var e=O(),t=Object(n.useState)(0),a=Object(l.a)(t,2),o=a[0],c=a[1],u=Object(n.useState)({selected:"popular",movies:[],popular:{currentPage:1,movies:[]},topRated:{currentPage:1,movies:[]},nowPlaying:{currentPage:1,movies:[]},changeState:function(e,t){h(e,t)}}),p=Object(l.a)(u,2),f=p[0],g=p[1],h=function(e,t){switch(e){case"popular":g(Object(i.a)({},f,{popular:{currentPage:f.currentPage++,movies:t}}));break;case"top_rated":g(Object(i.a)({},f,{topRated:{currentPage:f.currentPage++,movies:t}}));break;case"now_playing":g(Object(i.a)({},f,{nowPlaying:{currentPage:f.currentPage++,movies:t}}))}},v=["popular","top_rated","now_playing"];return r.a.createElement(j,{value:[f,g]},r.a.createElement("div",{className:e.root},r.a.createElement(s.a,{position:"static"},r.a.createElement(m.a,{value:o,onChange:function(e,t){c(t),g(Object(i.a)({},f,{selected:v[t]}))}},v.map(function(e){return r.a.createElement(d.a,{label:e})}))),r.a.createElement(w,null)),f&&r.a.createElement("p",null,f.selected))}var k=a(51),x=a.n(k),C=a(71),S=a(152),P=a(156),_=a(154),I=a(151),A=a(116),B=r.a.createContext();B.Consumer;var N=Object(A.a)(function(e){return{container:{display:"flex",alignItems:"center",justifyContent:"center",background:"primary",minHeight:"100vh",flexDirection:"column"},loginContainer:{width:"30vh",height:"30vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"10vh"},form:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"45vh",height:"45vh"}}}),W=function(e){var t=N(),a=Object(n.useState)(""),o=Object(l.a)(a,2),c=o[0],i=o[1],u=Object(n.useState)(""),s=Object(l.a)(u,2),m=s[0],d=s[1],p=Object(n.useContext)(B),f=p.setAuthenticated,g=p.setAuthBody,h=function(e){switch(e.target.id){case"email":e.preventDefault(),i(e.target.value);break;case"password":d(e.target.value)}},b=function(){return""!==c&&/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(c)},w=function(){var t=Object(C.a)(x.a.mark(function t(a){var n,r;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,v.a.get("https://api.themoviedb.org/3/authentication/token/new?api_key=3d9f6ef05faa3072ee2caf7fb6870964");case 4:if(200!==(n=t.sent).status){t.next=12;break}return t.next=8,v.a.post("https://api.themoviedb.org/3/authentication/token/validate_with_login?api_key=3d9f6ef05faa3072ee2caf7fb6870964",{username:c,password:m,request_token:n.data.request_token});case 8:r=t.sent,f(!0),g(r.data),e.history.push("/movies");case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),console.log(t.t0);case 17:case"end":return t.stop()}},t,null,[[1,14]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:t.container},r.a.createElement("div",{className:t.loginContainer},r.a.createElement("form",{className:t.form,onSubmit:w},r.a.createElement(S.a,{error:!b(),helpingText:b?"":"enter valid email",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",onChange:h,name:"email",autoComplete:"email",autoFocus:!0}),r.a.createElement(S.a,{error:""===m,helpingText:""===m?"enter valid password":"",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onChange:h,autoComplete:"current-password"}),r.a.createElement(P.a,{control:r.a.createElement(_.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(I.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Sign In"))))};function D(e){var t=e.match;return console.log(t.params.id),r.a.createElement("div",null,"hello")}var q=a(30),H=a(72),F=function(e){var t=e.components,a=Object(H.a)(e,["components"]),o=Object(n.useContext)(B).authenticated;return r.a.createElement(q.b,Object.assign({},a,{render:function(e){return o?r.a.createElement(t,e):r.a.createElement(q.a,{to:"/login"})}}))};var L=function(){return r.a.createElement(g.a,null,r.a.createElement(q.d,null,r.a.createElement(q.b,{path:"/login",exact:!0,component:W}),r.a.createElement(F,{path:"/movies",exact:!0,strict:!0,component:y}),r.a.createElement(q.b,{path:"/movies/:id",component:D})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(function(e){var t=Object(n.useState)(window.localStorage.getItem("auth")||!1),a=Object(l.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(window.localStorage.getItem("authBody")||null),u=Object(l.a)(i,2),s=u[0],m=u[1];Object(n.useEffect)(function(){window.localStorage.setItem("auth",o),window.localStorage.setItem("authBody",s),console.log("called here")},[o,s]);var d={authenticated:o,setAuthenticated:c,authBody:s,setAuthBody:m};return r.a.createElement(B.Provider,{value:d},e.children)},null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},76:function(e,t,a){e.exports=a(114)},81:function(e,t,a){},82:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.5a4e0d7b.chunk.js.map